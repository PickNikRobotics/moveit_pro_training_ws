<?xml version='1.0' encoding='UTF-8'?>
<root BTCPP_format="4" main_tree_to_execute="Solution Pick From Pose with MTC">
  <!-- ////////// -->
  <BehaviorTree ID="Solution Pick From Pose with MTC" _description="Pick up and lift an object at a specified pose.">
    <Control ID="Sequence" name="root">
      <SubTree ID="OpenGripper"/>
      <SubTree ID="PickFromPose"/>
    </Control>
  </BehaviorTree>
  <!-- ////////// -->
  <BehaviorTree ID="PickFromPose" _description="Pick up and lift an object at a specified pose.">
    <Control ID="Sequence" name="pick_from_pose_main">
      <Action ID="CreateStampedPose" reference_frame="world" position_xyz="-0.6;-0.3;0.05" orientation_xyzw="-0.707;0.707;0.0;0.0" stamped_pose="{grasp_pose}"/>
      <Action ID="LoadObjectiveParameters" config_file_name="solution_pick_from_pose_config.yaml" parameters="{parameters}"/>
      <Action ID="InitializeMTCTask" task_id="pick_from_pose" controller_names="/joint_trajectory_controller /robotiq_gripper_controller" task="{pick_from_pose_task}"/>
      <Action ID="SetupMTCCurrentState" task="{pick_from_pose_task}"/>
      <Action ID="SetupMtcPickFromPose" grasp_pose="{grasp_pose}" task="{pick_from_pose_task}" parameters="{parameters}"/>
      <Action ID="PlanMTCTask" solution="{pick_from_pose_solution}" task="{pick_from_pose_task}"/>
      <Fallback name="wait_for_approval_if_user_available">
        <Inverter>
          <Action ID="IsUserAvailable"/>
        </Inverter>
        <Action ID="WaitForUserTrajectoryApproval" solution="{pick_from_pose_solution}"/>
      </Fallback>
      <Action ID="ExecuteMTCTask" solution="{pick_from_pose_solution}"/>
    </Control>
  </BehaviorTree>
  <!-- ////////// -->
  <BehaviorTree ID="OpenGripper" _description="Pick up and lift an object at a specified pose.">
    <Action ID="MoveGripperAction" gripper_command_action_name="/robotiq_gripper_controller/gripper_cmd" position="0.0"/>
  </BehaviorTree>
</root>
